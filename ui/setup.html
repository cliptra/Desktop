<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cliptra</title>

    <script src="https://cdn.tailwindcss.com/"></script>
    <link rel="stylesheet" href="./styles/main.css">
    <link rel="stylesheet" href="./styles/loaders.css">
    <link rel="stylesheet" href="./emoji/twemoji-awesome.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <link href='https://fonts.googleapis.com/css?family=Epilogue' rel='stylesheet'>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>
<body class="bg-gray-200">
<section class="overflow-hidden min-h-screen sm:grid sm:grid-cols-2 sm:items-center">
  <div class="p-8 md:p-12 lg:px-16 lg:py-24">
    <div class="mx-auto max-w-xl text-center ltr:sm:text-left rtl:sm:text-right">
      <div id="state1">
        <h2 class="text-2xl font-bold text-gray-900 md:text-3xl">
                Your multi-device clipboard <i class="twa twa-sparkles"></i>
              </h2>
        
              <p class="text-gray-500 md:mt-4 md:block">
                Say goodbye to emailing yourself files to transfer them to another device. Cliptra is a simple, <a href="https://cliptra.com/security" target="_blank"><strong>secure</strong></a>, and <a href="https://cliptra.com/reliable" target="_blank"><strong>reliable</strong></a> clipboard that works on <a href="https://cliptra.com/apps" target="_blank"><strong>all</strong></a> your devices.
              </p>
        
              <div class="mt-4 md:mt-8">
                <button
                  onclick="changeState('1', '2')"
                  class="inline-block rounded bg-pink-600 px-12 py-3 text-sm font-medium text-white transition hover:bg-pink-700 focus:outline-none focus:ring focus:ring-pink-400"
                >
                  Start setup for <span id="pcname">this pc</span>
              </button>
                <script>
                    window.addEventListener('DOMContentLoaded', () => {
                        document.getElementById("pcname").innerHTML = `<strong>${localStorage.getItem("local_hostname")}</strong> for user <strong>${localStorage.getItem("local_username")}</strong>`
                    })
                </script>
              </div>
        </div>

        <div id="state2" class="hidden opacity-0">
                <h2 class="text-2xl font-bold text-gray-900 md:text-3xl">
                        How would you like to call this device?
                </h2>
                
                      <div class="mt-4 md:mt-8">
                        <input
                          id="input_devicename"
                          value=""
                          placeholder=""
                          class="inline-block rounded bg-pink-600 px-12 py-3 text-sm font-medium text-white transition hover:bg-pink-700 focus:outline-none focus:ring focus:ring-pink-400 text-center"
                        >
                      </input>
                      <button
                                        onclick="submit_devicename()"
                                        class="inline-block rounded bg-pink-600 px-6 py-3 text-sm font-medium text-white transition hover:bg-pink-700 focus:outline-none focus:ring focus:ring-pink-400"
                                      >
                                      &nbsp;<i class="fa-solid fa-check"></i>&nbsp;
                                    </button>
                      <script>
                        window.addEventListener('DOMContentLoaded', () => {
                        document.getElementById("input_devicename").value = `${localStorage.getItem("local_hostname")}`
                        document.getElementById("input_devicename").placeholder = `${localStorage.getItem("local_hostname")}`
                         })
                       </script>
                      </div>
                </div>

          <div id="state3" class="hidden opacity-0">
                          <h2 class="text-2xl font-bold text-gray-900 md:text-3xl">
                              Select a folder for Cliptra
                          </h2>
                          
              <p class="text-gray-500 md:mt-4 md:block">
                This is the folder where files received by <span id="pcname2">this pc</span> are stored in
              </p>
                                <div class="mt-4 md:mt-8">
                                  <input
                                   id="input_folderdirectory"
                                   value=""
                                    placeholder=""
                                     class="inline-block rounded bg-pink-600 px-6 py-3 text-sm font-medium text-white transition hover:bg-pink-700 focus:outline-none focus:ring focus:ring-pink-400 text-center"
                                                          >
                                    </input>
                                    <script>
                                                            window.addEventListener('DOMContentLoaded', () => {
                                                            document.getElementById("input_folderdirectory").value = `C:/Users/${localStorage.getItem("local_username")}/Documents/Cliptra`
                                                            document.getElementById("input_folderdirectory").placeholder = `C:/Users/${localStorage.getItem("local_username")}/Documents/Cliptra`
                                                             })
                                                           </script>
                                    <button
                                                                          onclick=""
                                                                          class="inline-block rounded bg-pink-600 px-6 py-3 text-sm font-medium text-white transition hover:bg-pink-700 focus:outline-none focus:ring focus:ring-pink-400"
                                                                        >
                                                                        &nbsp;<i class="fa-solid fa-folder"></i>&nbsp;
                                     </button>
                                     <button
                                                                                                               onclick="submit_location()"
                                                                                                               class="inline-block rounded bg-pink-600 px-6 py-3 text-sm font-medium text-white transition hover:bg-pink-700 focus:outline-none focus:ring focus:ring-pink-400"
                                                                                                             >
                                                                                                             &nbsp;<i class="fa-solid fa-check"></i>&nbsp;
                                                                          </button>
                                </div>
          </div>

          <div id="state4" class="hidden opacity-0">
            <h2 class="text-2xl font-bold text-gray-900 md:text-5xl">
                One more step... <i class="twa twa-eyes"></i>
            </h2>

                  <div class="mt-4 md:mt-8">
                      <a
                                                            href="http://localhost:3000/auth/?session=ATqDvXgKegFHXtumXVVlgvNGhBeHXMrp2MlitbZhLFGYBqfsgcb8t2N1P4PumXVVlgvNGhBeHXMrp2MlitbZhLFGYBqIBMcefdei73uUZ3nFuqqmrYJ5I2UD23xagLRoQB0EtBLTQhgh1EZB8HTeaCJCTuOxNMocumXVVlgvNGhBeHXMrp2MlitbZhLFGYBqumXVVlgvNGhBeHXMrp2MlitbZhLFGYBq&target=desktop-app-windows"
                                                            target="_blank"
                                                            class="inline-block rounded bg-pink-600 px-6 py-3 text-sm font-medium text-white transition hover:bg-pink-700 focus:outline-none focus:ring focus:ring-pink-400"
                                                          >
                                                            Login or create your Cliptra account
                  </a>
                  </div>
</div>
    </div>
  </div>

  <img
    alt=""
    src="https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fgiffiles.alphacoders.com%2F214%2F214311.gif&f=1&nofb=1&ipt=163df0c71098820a68e4dd97677be3ef65ce194d92c1980ded52276985620a51&ipo=images"
    class="h-full w-full object-cover sm:h-[calc(100%_-_2rem)] sm:self-end sm:rounded-ss-[30px] md:h-[calc(100%_-_4rem)] md:rounded-ss-[60px]"
  />
</section>

</body>
<script>
    function changeState(from, to){
      $(`#state${from}`).animate({opacity:0})
      
      setTimeout(() => {
        document.getElementById(`state${from}`).classList.add("hidden")
        document.getElementById(`state${to}`).classList.remove("hidden")
      }, 500);

      setTimeout(() => {
        $(`#state${to}`).animate({opacity:1})
      }, 1000);
    }

    function submit_devicename(){
      if(!document.getElementById("input_devicename").value){
        return
      }

      document.getElementById("pcname2").innerHTML = `${document.getElementById("input_devicename").value}`
      localStorage.setItem("temporary_setupdata_devicename", document.getElementById("input_devicename").value)
      changeState('2', '3')
    }

    function submit_location(){
      if(!document.getElementById("input_folderdirectory").value){
        return
      }

      localStorage.setItem("temporary_setupdata_folderdirectory", document.getElementById("input_folderdirectory").value)
      changeState('3', '4')
    }

    async function getDir() {
      const { ipcRenderer } = require('electron') 
      async () => {
        const result = await ipcRenderer.invoke('getDirectory')
        console.log(result)
      }
    }
</script>
</html>